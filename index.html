<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inserir com ajax</title>
</head>
<body>
    <main>
        <form id="formulario">
            <div>
                <label>Nome</label>
                <input type="text" name="nome" id="nomeId"/>
                <br>
                <label>Email</label>
                <input type="email" name="email" id="emailId"/>
                <br>
                <label>Número</label>
                <input type="text" name="phone" id="phoneId"/>
                <br>
                <label>Cidade</label>
                <input type="text" name="city" id="cityId"/>
            </div>

            <div id="msg" style="display: none;">
                <p></p>
            </div>

            <br>
            <br>
            <input type="submit" value="Enviar">
        </form>
    </main>

    <script src="jquery/jquery-1.11.0.min.js"></script>
    <script>
        $('#formulario').submit(function(e){
            e.preventDefault();
            var formulario = $(this);
            var retorno = InsertDados(formulario);

            function InsertDados(dados){
                $.ajax({
                    type:"POST",
                    data:dados.serialize(),
                    url:"inserirDados.php",
                    async: false
                }).then(sucesso,falha);

                function sucesso(data){
                    $sucesso = $.parseJSON(data)["sucesso"];
                    $mensagem = $.parseJSON(data)["mensagem"]
                    $('#msg').show();                    

                    if($sucesso){
                        $('#msg').html($mensagem);       
                        //Limpar dados do formulário
                        $('#formulario').each (function(){
                            this.reset();
                        });               
                    }else{
                        $('#msg').html($mensagem);
                    }
                }

                function falha(){
                   
                }
            }
            
        });
    </script>
</body>
</html>